{"is_source_file": true, "format": "Python", "description": "This is the main backend source code for an API service built with FastAPI. It handles user authentication, profile management, and CRUD operations for audio visualizer configurations, including database interactions and security utilities.", "external_files": ["os", "datetime", "typing", "fastapi", "pydantic", "jose", "passlib", "psycopg2"], "external_methods": ["FastAPI()", "Depends()", "HTTPException()", "status.HTTP_401_UNAUTHORIZED", "status.HTTP_204_NO_CONTENT", "os.getenv()", "jwt.encode()", "jwt.decode()", "CryptContext()", "psycopg2.connect()"], "published": ["health_check", "signup", "login", "get_me", "update_me", "create_config", "list_configs", "get_config", "update_config", "delete_config"], "classes": [{"name": "Token", "description": "Pydantic model for JWT token response."}, {"name": "TokenData", "description": "Pydantic model for token payload data."}, {"name": "SignupRequest", "description": "Request model for user signup."}, {"name": "UserResponse", "description": "Response model containing user details."}, {"name": "UpdateProfileRequest", "description": "Request model for updating user profile."}, {"name": "VisualizerConfigCreate", "description": "Model for creating new visualizer configs."}, {"name": "VisualizerConfigUpdate", "description": "Model for updating existing visualizer configs."}, {"name": "VisualizerConfigOut", "description": "Response model for visualizer configuration details."}], "methods": [{"name": "_get_db()", "description": "Creates a new database connection for each request.", "scope": "", "scopeKind": ""}, {"name": "_init_db()", "description": "Initializes database schema at startup if not exists.", "scope": "", "scopeKind": ""}, {"name": "bool verify_password(plain_password: str, password_hash: str)", "description": "Verifies a plaintext password against a hashed password.", "scope": "", "scopeKind": ""}, {"name": "str get_password_hash(password: str)", "description": "Hashes a password using bcrypt.", "scope": "", "scopeKind": ""}, {"name": "str create_access_token(data: dict, expires_delta: Optional[timedelta] = None)", "description": "Generates a JWT token with expiration.", "scope": "", "scopeKind": ""}, {"name": "dict get_current_user(token: str = Depends(oauth2_scheme))", "description": "Dependency that extracts and validates the current user from JWT token.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Simple endpoint to monitor service health.", "scope": "", "scopeKind": ""}, {"name": "signup(payload: SignupRequest)", "description": "Registers a new user and stores in database.", "scope": "", "scopeKind": ""}, {"name": "login(form_data: OAuth2PasswordRequestForm = Depends())", "description": "Authenticates user and returns JWT token.", "scope": "", "scopeKind": ""}, {"name": "get_me(current_user: dict = Depends(get_current_user))", "description": "Returns current user's profile data.", "scope": "", "scopeKind": ""}, {"name": "update_me(update: UpdateProfileRequest, current_user: dict = Depends(get_current_user))", "description": "Updates current user's display name.", "scope": "", "scopeKind": ""}, {"name": "create_config(payload: VisualizerConfigCreate, current_user: dict = Depends(get_current_user))", "description": "Creates a new visualizer configuration for the logged-in user.", "scope": "", "scopeKind": ""}, {"name": "list_configs(current_user: dict = Depends(get_current_user))", "description": "Lists all configurations owned by the user.", "scope": "", "scopeKind": ""}, {"name": "get_config(config_id: int, current_user: dict = Depends(get_current_user))", "description": "Fetches a specific visualizer configuration by ID.", "scope": "", "scopeKind": ""}, {"name": "update_config(config_id: int, update: VisualizerConfigUpdate, current_user: dict = Depends(get_current_user))", "description": "Updates a visualizer configuration.", "scope": "", "scopeKind": ""}, {"name": "delete_config(config_id: int, current_user: dict = Depends(get_current_user))", "description": "Deletes a visualizer configuration.", "scope": "", "scopeKind": ""}, {"name": "str jsonify(value)", "description": "Serializes Python object to JSON string for database storage.", "scope": "", "scopeKind": ""}, {"name": "dict normalize_config_row(row: dict)", "description": "Converts database row to response dict with parsed JSON config.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict] _get_user_by_email(email: str)", "description": "Fetches user by email from database.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict] _get_user_by_id(user_id: int)", "description": "Fetches user by ID from database.", "scope": "", "scopeKind": ""}, {"name": "dict _create_user(email: str, password: str, display_name: Optional[str])", "description": "Creates a new user record in database.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict] _authenticate_user(email: str, password: str)", "description": "Verifies user credentials.", "scope": "", "scopeKind": ""}, {"name": "Optional[dict] _get_config_owned(user_id: int, config_id: int)", "description": "Fetches a user-owned configuration by ID.", "scope": "", "scopeKind": ""}, {"name": "on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["FastAPI()", "Depends()", "HTTPException()", "jwt.encode()", "jwt.decode()", "psycopg2.connect()", "os.getenv()", "CryptContext()", "_get_db()", "_init_db()", "verify_password()", "get_password_hash()", "create_access_token()"], "search-terms": ["FastAPI", "JWT", "visualizer", "auth", "configurations", "user profile", "database schema", "OAuth2PasswordBearer", "pydantic", "REST API"], "state": 2, "file_id": 2, "knowledge_revision": 16, "git_revision": "e40f00d85d2e00bc72811622c3f7fa11278ee4f3", "revision_history": [{"8": "9d271a2b08c93e312c9ffc56d4b0c9d076b235dd"}, {"10": "9d271a2b08c93e312c9ffc56d4b0c9d076b235dd"}, {"16": "e40f00d85d2e00bc72811622c3f7fa11278ee4f3"}], "ctags": [{"_type": "tag", "name": "FRONTEND_ORIGINS", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^FRONTEND_ORIGINS = os.getenv(\"FRONTEND_ORIGINS\", \"http:\\/\\/localhost:3000,https:\\/\\/vscode-inter/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JWT_ACCESS_TOKEN_EXPIRE_MINUTES", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^JWT_ACCESS_TOKEN_EXPIRE_MINUTES = int(os.getenv(\"JWT_ACCESS_TOKEN_EXPIRE_MINUTES\", \"120\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JWT_ALGORITHM", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^JWT_ALGORITHM = os.getenv(\"JWT_ALGORITHM\", \"HS256\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "JWT_SECRET_KEY", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^JWT_SECRET_KEY = os.getenv(\"JWT_SECRET_KEY\", \"CHANGE_ME_DEV_ONLY\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_DB", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    POSTGRES_DB = os.getenv(\"POSTGRES_DB\", \"\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_HOST", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    POSTGRES_HOST = os.getenv(\"POSTGRES_HOST\", \"localhost\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_PASSWORD", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    POSTGRES_PASSWORD = os.getenv(\"POSTGRES_PASSWORD\", \"\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_PORT", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    POSTGRES_PORT = os.getenv(\"POSTGRES_PORT\", \"5432\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_URL", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^        POSTGRES_URL = f\"postgresql:\\/\\/{POSTGRES_USER}:{POSTGRES_PASSWORD}@{POSTGRES_HOST}:{POS/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_URL", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^POSTGRES_URL = os.getenv(\"POSTGRES_URL\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "POSTGRES_USER", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    POSTGRES_USER = os.getenv(\"POSTGRES_USER\", \"\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SignupRequest", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class SignupRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Token", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class Token(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenData", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class TokenData(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UpdateProfileRequest", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class UpdateProfileRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserResponse", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class UserResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "VisualizerConfigCreate", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class VisualizerConfigCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "VisualizerConfigOut", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class VisualizerConfigOut(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "VisualizerConfigUpdate", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^class VisualizerConfigUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_authenticate_user", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def _authenticate_user(email: str, password: str) -> Optional[dict]:$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "function", "signature": "(email: str, password: str)"}, {"_type": "tag", "name": "_create_user", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def _create_user(email: str, password: str, display_name: Optional[str]) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(email: str, password: str, display_name: Optional[str])"}, {"_type": "tag", "name": "_get_config_owned", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def _get_config_owned(user_id: int, config_id: int) -> Optional[dict]:$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "function", "signature": "(user_id: int, config_id: int)"}, {"_type": "tag", "name": "_get_db", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def _get_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_user_by_email", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def _get_user_by_email(email: str) -> Optional[dict]:$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "function", "signature": "(email: str)"}, {"_type": "tag", "name": "_get_user_by_id", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def _get_user_by_id(user_id: int) -> Optional[dict]:$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "function", "signature": "(user_id: int)"}, {"_type": "tag", "name": "_init_db", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def _init_db():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_json", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^import json as _json  # alias to avoid shadowing pydantic BaseModel$/", "language": "Python", "kind": "namespace", "nameref": "module:json"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "allow_origins", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^allow_origins = [o.strip() for o in FRONTEND_ORIGINS.split(\",\") if o.strip()]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    config: Optional[dict] = Field(None, description=\"Optional new configuration\")$/", "language": "Python", "typeref": "typename:Optional[dict]", "kind": "variable", "scope": "VisualizerConfigUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    config: dict = Field(..., description=\"Arbitrary JSON configuration for visualizer\")$/", "language": "Python", "typeref": "typename:dict", "kind": "variable", "scope": "VisualizerConfigCreate", "scopeKind": "class"}, {"_type": "tag", "name": "create_access_token", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def create_access_token(data: dict, expires_delta: Optional[timedelta] = None) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(data: dict, expires_delta: Optional[timedelta] = None)"}, {"_type": "tag", "name": "create_config", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def create_config(payload: VisualizerConfigCreate, current_user: dict = Depends(get_current_user/", "language": "Python", "kind": "function", "signature": "(payload: VisualizerConfigCreate, current_user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "delete_config", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def delete_config(config_id: int, current_user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(config_id: int, current_user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    display_name: Optional[str] = Field(None, description=\"Display name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    display_name: Optional[str] = Field(None, description=\"New display name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "UpdateProfileRequest", "scopeKind": "class"}, {"_type": "tag", "name": "display_name", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    display_name: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "UserResponse", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"User email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "get_config", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def get_config(config_id: int, current_user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(config_id: int, current_user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def get_current_user(token: str = Depends(oauth2_scheme)) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(token: str = Depends(oauth2_scheme))"}, {"_type": "tag", "name": "get_me", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def get_me(current_user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(current_user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "get_password_hash", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def get_password_hash(password: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(password: str)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "jsonify", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def jsonify(value) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(value)"}, {"_type": "tag", "name": "list_configs", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def list_configs(current_user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(current_user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def login(form_data: OAuth2PasswordRequestForm = Depends()):$/", "language": "Python", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends())"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    name: Optional[str] = Field(None, description=\"Optional new name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "VisualizerConfigUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    name: str = Field(..., description=\"Configuration name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "VisualizerConfigCreate", "scopeKind": "class"}, {"_type": "tag", "name": "normalize_config_row", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def normalize_config_row(row: dict) -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "(row: dict)"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    password: str = Field(..., min_length=6, description=\"Password (min 6 chars)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "SignupRequest", "scopeKind": "class"}, {"_type": "tag", "name": "pwd_context", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "signup", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def signup(payload: SignupRequest):$/", "language": "Python", "kind": "function", "signature": "(payload: SignupRequest)"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    token_type: str = Field(\"bearer\", description=\"Token type\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Token", "scopeKind": "class"}, {"_type": "tag", "name": "update_config", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def update_config(config_id: int, update: VisualizerConfigUpdate, current_user: dict = Depends(g/", "language": "Python", "kind": "function", "signature": "(config_id: int, update: VisualizerConfigUpdate, current_user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "update_me", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def update_me(update: UpdateProfileRequest, current_user: dict = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(update: UpdateProfileRequest, current_user: dict = Depends(get_current_user))"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^    user_id: Optional[int] = Field(None, description=\"User ID from token subject\")$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "TokenData", "scopeKind": "class"}, {"_type": "tag", "name": "verify_password", "path": "/home/kavia/workspace/code-generation/audio-visualizer-platform-190701-190711/audio_visualizer_backend/src/api/main.py", "pattern": "/^def verify_password(plain_password: str, password_hash: str) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(plain_password: str, password_hash: str)"}], "hash": "ec767da05aa85b837b52d85f2ff9b69f", "format-version": 4, "code-base-name": "audio_visualizer_backend", "filename": "audio_visualizer_backend/src/api/main.py", "fields": [{"name": "FRONTEND_ORIGINS = os.getenv(\"FRONTEND_ORIGINS\", \"http:\\/\\/localhost:3000,https:\\/\\/vscode-inter/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JWT_ACCESS_TOKEN_EXPIRE_MINUTES = int(os.getenv(\"JWT_ACCESS_TOKEN_EXPIRE_MINUTES\", \"120\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JWT_ALGORITHM = os.getenv(\"JWT_ALGORITHM\", \"HS256\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "JWT_SECRET_KEY = os.getenv(\"JWT_SECRET_KEY\", \"CHANGE_ME_DEV_ONLY\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_DB = os.getenv(\"POSTGRES_DB\", \"\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_HOST = os.getenv(\"POSTGRES_HOST\", \"localhost\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_PASSWORD = os.getenv(\"POSTGRES_PASSWORD\", \"\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_PORT = os.getenv(\"POSTGRES_PORT\", \"5432\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_URL = f\"postgresql:\\/\\/{POSTGRES_USER}:{POSTGRES_PASSWORD}@{POSTGRES_HOST}:{POS/", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_URL = os.getenv(\"POSTGRES_URL\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "POSTGRES_USER = os.getenv(\"POSTGRES_USER\", \"\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str access_token", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "allow_origins = [o.strip() for o in FRONTEND_ORIGINS.split(\",\") if o.strip()]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[dict] config", "scope": "VisualizerConfigUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "dict config", "scope": "VisualizerConfigCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] display_name", "scope": "SignupRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "SignupRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] name", "scope": "VisualizerConfigUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str name", "scope": "VisualizerConfigCreate", "scopeKind": "class", "description": "unavailable"}, {"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str password", "scope": "SignupRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str token_type", "scope": "Token", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] user_id", "scope": "TokenData", "scopeKind": "class", "description": "unavailable"}]}